import{c as z,au as H,h as U,t as Y,d as A,r as C,av as Z,x as D,w as j,aw as q,o as N,Z as J,ax as Q,f as F,k as K,ay as M,az as W,a6 as X,a as ee,_ as B,y as s,z as n,N as E,A as i,F as S,ae as I,S as x,ad as w,ah as le,ag as R,G as ae,P as te,U as se,V as ne,ak as oe,e as ie,ab as G,ac as L}from"./index-CDHd4m-7.js";import{u as ce}from"./paperPlane-wi0kQdUE.js";const[re,P,ue]=z("list"),de={error:Boolean,offset:H(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:U("down"),loadingText:String,finishedText:String,immediateCheck:Y};var ve=A({name:re,props:de,emits:["load","update:error","update:loading"],setup(e,{emit:$,slots:c}){const b=C(e.loading),r=C(),_=C(),l=ce(),y=Z(r),t=D(()=>e.scroller||y.value),v=()=>{K(()=>{if(b.value||e.finished||e.disabled||e.error||(l==null?void 0:l.value)===!1)return;const{direction:o}=e,u=+e.offset,k=M(t);if(!k.height||W(r))return;let a=!1;const d=M(_);o==="up"?a=k.top-d.top<=u:a=d.bottom-k.bottom<=u,a&&(b.value=!0,$("update:loading",!0),$("load"))})},m=()=>{if(e.finished){const o=c.finished?c.finished():e.finishedText;if(o)return F("div",{class:P("finished-text")},[o])}},g=()=>{$("update:error",!1),v()},T=()=>{if(e.error){const o=c.error?c.error():e.errorText;if(o)return F("div",{role:"button",class:P("error-text"),tabindex:0,onClick:g},[o])}},p=()=>{if(b.value&&!e.finished&&!e.disabled)return F("div",{class:P("loading")},[c.loading?c.loading():F(X,{class:P("loading-icon")},{default:()=>[e.loadingText||ue("loading")]})])};return j(()=>[e.loading,e.finished,e.error],v),l&&j(l,o=>{o&&v()}),q(()=>{b.value=e.loading}),N(()=>{e.immediateCheck&&v()}),J({check:v}),Q("scroll",v,{target:t,passive:!0}),()=>{var o;const u=(o=c.default)==null?void 0:o.call(c),k=F("div",{ref:_,class:P("placeholder")},null);return F("div",{ref:r,role:"feed",class:P(),"aria-busy":b.value},[e.direction==="down"?u:k,p(),m(),T(),e.direction==="up"?u:k])}}});const ll=ee(ve),pe=e=>(se("data-v-8ad61b88"),e=e(),ne(),e),fe={class:"filter-bar-root"},he={class:"filter-main"},be={class:"filter-left"},_e=["onClick"],me={key:0,class:"filter-right"},ge=pe(()=>i("span",{class:"group-thumb"},null,-1)),ke={class:"group-label"},Ce={key:1,class:"dropdown-panel"},ye={class:"p-4"},Se={class:"p-4"},xe={__name:"index",props:{mainFilters:{type:Array,default:()=>[]},showGroupSwitch:{type:Boolean,default:!0},groupValue:{type:String,default:"external"}},emits:["groupChange"],setup(e,{emit:$}){const c=e,b=$,r=C(null),_=C(!1),l=C(c.groupValue==="external"),y=g=>{g.key==="more"?(_.value=!0,r.value=null):r.value=r.value===g.key?null:g.key},t=()=>{r.value=null},v=()=>{_.value=!1},m=()=>{l.value=!l.value,b("groupChange",l.value?"external":"internal")};return(g,T)=>{const p=te;return s(),n("div",fe,[r.value?(s(),n("div",{key:0,class:"fixed inset-0 bg-black/30 z-40",onClick:t})):E("",!0),i("div",he,[i("div",be,[(s(!0),n(S,null,I(e.mainFilters,o=>(s(),n("div",{key:o.key,class:x(["filter-item",{active:r.value===o.key}]),onClick:u=>y(o)},[i("span",null,w(o.label),1),i("span",{class:x(["arrow",{open:r.value===o.key}])},"▼",2)],10,_e))),128))]),e.showGroupSwitch?(s(),n("div",me,[i("label",{class:"group-switch",onClick:le(m,["prevent"])},[i("span",{class:x(["group-slider",l.value?"external":"internal"])},[ge,i("span",ke,w(l.value?"集团外":"集团内"),1)],2)])])):E("",!0)]),r.value&&r.value!=="more"?(s(),n("div",Ce,[i("div",ye,[R(g.$slots,r.value,{close:t},void 0,!0)])])):E("",!0),F(p,{show:_.value,"onUpdate:show":T[0]||(T[0]=o=>_.value=o),position:"bottom",round:"",style:{maxHeight:"70vh"}},{default:ae(()=>[i("div",Se,[R(g.$slots,"more",{close:v},void 0,!0)])]),_:3},8,["show"])])}}},al=B(xe,[["__scopeId","data-v-8ad61b88"]]),$e={class:"bp-grid"},we=["onClick"],Te={key:0,class:"bp-check"},Ie=A({name:"BusinessFilterPanel"}),Ee=Object.assign(Ie,{props:{options:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","selection-change"],setup(e,{emit:$}){const c=e,b=$,r=["厦门CTS","厦门ECD","厦门Infra","厦门产业Sol","上海分公司","神钢长驻","苏州事务所","重庆事务所"],_=D(()=>c.options.length?c.options.map(t=>typeof t=="string"?t:t.label||t.value):r),l=C(new Set(c.modelValue)),y=t=>{l.value.has(t)?l.value.delete(t):l.value.add(t),l.value=new Set(l.value);const v=[...l.value];b("update:modelValue",v),b("selection-change",{selected:v})};return(t,v)=>(s(),n("div",$e,[(s(!0),n(S,null,I(_.value,m=>(s(),n("div",{key:m,class:x(["bp-item",{selected:l.value.has(m)}]),onClick:g=>y(m)},[i("span",null,w(m),1),l.value.has(m)?(s(),n("span",Te,"✓")):E("",!0)],10,we))),128))]))}}),tl=B(Ee,[["__scopeId","data-v-da3a73c4"]]),Fe={key:0,class:"dp-container"},Pe={class:"dp-tabs"},De=["onClick"],Ve={class:"dp-content"},Ae=["onClick"],Be={key:0,class:"dp-check"},Oe={key:1,class:"dp-ext-list"},je=["onClick"],Me={key:0,class:"dp-check"},Re=A({name:"DepartmentFilterPanel"}),Ge=Object.assign(Re,{props:{mode:{type:String,default:"internal"},departments:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","selection-change"],setup(e,{emit:$}){const c=e,b=$,r=[{label:"交付C",items:["MES-1","MES-2","SI1-1","SI1-2","SI1-3","SI1-4","SI2","SI3","SI4","SI5","CTS","CBD","OVS","ITTC"]},{label:"研発C",items:["IC1","IC2","CoE"]},{label:"市場C",items:["ECD"]},{label:"顧客C",items:["C²DO","DIS","RIG","CQCC","SZCC","CCS"]},{label:"経管C",items:["HRN","ADM"]}],_=["研発C","交付C","市场C","顧客C","経管C"],l=D(()=>{var p;return c.mode==="external"?[]:c.departments.length&&((p=c.departments[0])!=null&&p.children)?c.departments.map(o=>({label:o.label,items:(o.children||[]).map(u=>u.label||u.value)})):r}),y=D(()=>c.mode!=="external"?[]:c.departments.length?c.departments.map(p=>typeof p=="string"?p:p.label||p.value):_),t=C(0),v=C(c.modelValue[0]||""),m=D(()=>{var p;return((p=l.value[t.value])==null?void 0:p.items)||[]}),g=D(()=>m.value.length>5),T=p=>{v.value=p,b("update:modelValue",[p]),b("selection-change",{selected:[p]})};return(p,o)=>e.mode==="internal"?(s(),n("div",Fe,[i("div",Pe,[(s(!0),n(S,null,I(l.value,(u,k)=>(s(),n("div",{key:k,class:x(["dp-tab",{active:t.value===k}]),onClick:a=>t.value=k},w(u.label),11,De))),128))]),i("div",Ve,[i("div",{class:x(g.value?"dp-grid":"dp-list")},[(s(!0),n(S,null,I(m.value,u=>(s(),n("div",{key:u,class:x(["dp-item",{selected:v.value===u}]),onClick:k=>T(u)},[i("span",null,w(u),1),v.value===u?(s(),n("span",Be,"✓")):E("",!0)],10,Ae))),128))],2)])])):(s(),n("div",Oe,[(s(!0),n(S,null,I(y.value,u=>(s(),n("div",{key:u,class:x(["dp-item",{selected:v.value===u}]),onClick:k=>T(u)},[i("span",null,w(u),1),v.value===u?(s(),n("span",Me,"✓")):E("",!0)],10,je))),128))]))}}),sl=B(Ge,[["__scopeId","data-v-f64470c3"]]),Le={class:"cfp-container"},Ne={class:"cfp-nav"},ze=["onClick"],He={class:"cfp-section-title"},Ue={key:0,class:"cfp-tags"},Ye=["onClick"],Ze={class:"cfp-tags"},qe=["onClick"],Je={class:"cfp-tags"},Qe=["onClick"],Ke=A({name:"CustomerFilterPanel"}),We=Object.assign(Ke,{emits:["confirm","reset"],setup(e,{expose:$,emit:c}){const b=c,r=[{id:"region",title:"地域",options:[{value:"all",label:"全部"},{value:"china",label:"外販_中国"},{value:"overseas",label:"外販_海外"},{value:"ymc-china",label:"YMC-Gr_中国"},{value:"ymc-ymap",label:"YMC-Gr_YMAP"},{value:"ymc-overseas",label:"YMC-Gr_海外他"}]},{id:"companyType",title:"企业性质",options:[{value:"all",label:"全部"},{value:"hmt",label:"港澳台资"},{value:"state-owned",label:"国企"},{value:"private",label:"民营企业"},{value:"eu-us",label:"欧美企业"},{value:"other",label:"其他"},{value:"japan",label:"日企"}]},{id:"group",title:"所属集团",options:[{value:"all",label:"全部"},{value:"jizhuang",label:"计装"},{value:"yaidi",label:"雅迪"},{value:"toto",label:"TOTO"},{value:"shinko",label:"神钢集团"},{value:"dafu",label:"大福"},{value:"shadike",label:"沙迪克"}]},{id:"area",title:"所属地区",isArea:!0,chinaOptions:[{value:"all",label:"全部"},{value:"beijing",label:"北京"},{value:"shanghai",label:"上海"},{value:"guangdong",label:"广东"},{value:"jiangsu",label:"江苏"},{value:"zhejiang",label:"浙江"},{value:"shandong",label:"山东"},{value:"sichuan",label:"四川"},{value:"henan",label:"河南"},{value:"hubei",label:"湖北"},{value:"fujian",label:"福建"},{value:"chongqing",label:"重庆"},{value:"tianjin",label:"天津"},{value:"liaoning",label:"辽宁"},{value:"anhui",label:"安徽"}],overseasOptions:[{value:"all",label:"全部"},{value:"japan",label:"Japan"},{value:"france",label:"France"},{value:"china-overseas",label:"中国"},{value:"indonesia",label:"Indonesia"}]},{id:"maintenanceExpiry",title:"运维到期",options:[{value:"all",label:"全部"},{value:"7days",label:"7天"},{value:"15days",label:"15天"},{value:"30days",label:"30天"}]},{id:"maintenanceRisk",title:"运维风险",options:[{value:"all",label:"全部"},{value:"geopolitics",label:"地缘政治"},{value:"internalFinance",label:"内部财务"}]},{id:"maintenanceHealth",title:"运维健康",options:[{value:"all",label:"全部"},{value:"expired",label:"到期未续"},{value:"free-expired",label:"免费期满"},{value:"suspended",label:"中途停用"}]},{id:"systemActivity",title:"系统活跃",options:[{value:"all",label:"全部"},{value:"silent",label:"账户静默"},{value:"stagnant",label:"业务停滞"}]},{id:"workOrderAlert",title:"工单预警",options:[{value:"all",label:"全部"},{value:"timeout",label:"超时"},{value:"high-priority",label:"高优先级"},{value:"pending",label:"待处理"}]}],_=C(0),l=oe({});r.forEach(a=>{l[a.id]="all"});const y=C(!1),t=C(null),v=C([]),m=(a,d)=>{a&&(v.value[d]=a)},g=a=>{_.value=a;const d=v.value[a];d&&t.value&&t.value.scrollTo({top:d.offsetTop-t.value.offsetTop,behavior:"smooth"})},T=()=>{if(!t.value)return;const a=t.value.scrollTop+10;for(let d=v.value.length-1;d>=0;d--){const f=v.value[d];if(f&&f.offsetTop-t.value.offsetTop<=a){_.value=d;break}}},p=(a,d)=>{l[a]=d,a==="region"&&(y.value=d==="overseas",l.area="all")},o=()=>{r.forEach(a=>{l[a.id]="all"}),y.value=!1,_.value=0,t.value&&(t.value.scrollTop=0),b("reset")},u=()=>{const a={};r.forEach(d=>{a[d.id]=l[d.id]==="all"?"":l[d.id]}),b("confirm",a)};return $({reset:o,getSelectedFilters:()=>{const a={};return r.forEach(d=>{a[d.id]=l[d.id]==="all"?"":l[d.id]}),a}}),N(()=>{var a;(a=t.value)==null||a.addEventListener("scroll",T)}),ie(()=>{var a;(a=t.value)==null||a.removeEventListener("scroll",T)}),(a,d)=>(s(),n(S,null,[i("div",Le,[i("div",Ne,[(s(),n(S,null,I(r,(f,V)=>i("div",{key:f.id,class:x(["cfp-nav-tab",{active:_.value===V}]),onClick:h=>g(V)},w(f.title),11,ze)),64))]),i("div",{class:"cfp-content",ref_key:"contentRef",ref:t},[(s(),n(S,null,I(r,(f,V)=>i("div",{key:f.id,class:"cfp-section",ref_for:!0,ref:h=>m(h,V)},[i("div",He,w(f.title),1),f.isArea?E("",!0):(s(),n("div",Ue,[(s(!0),n(S,null,I(f.options,h=>(s(),n("div",{key:h.value,class:x(["cfp-tag",{selected:l[f.id]===h.value}]),onClick:O=>p(f.id,h.value)},w(h.label),11,Ye))),128))])),f.isArea?(s(),n(S,{key:1},[G(i("div",Ze,[(s(!0),n(S,null,I(f.chinaOptions,h=>(s(),n("div",{key:h.value,class:x(["cfp-tag",{selected:l[f.id]===h.value}]),onClick:O=>p(f.id,h.value)},w(h.label),11,qe))),128))],512),[[L,!y.value]]),G(i("div",Je,[(s(!0),n(S,null,I(f.overseasOptions,h=>(s(),n("div",{key:h.value,class:x(["cfp-tag",{selected:l[f.id]===h.value}]),onClick:O=>p(f.id,h.value)},w(h.label),11,Qe))),128))],512),[[L,y.value]])],64)):E("",!0)],512)),64))],512)]),i("div",{class:"cfp-footer"},[i("div",{class:"cfp-btn-reset",onClick:o},"重置"),i("div",{class:"cfp-btn-confirm",onClick:u},"确认")])],64))}}),nl=B(We,[["__scopeId","data-v-a046a2a6"]]);export{tl as B,nl as C,sl as D,al as F,ll as L};
