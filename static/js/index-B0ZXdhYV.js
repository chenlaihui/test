import{_ as N,R as z,r as u,x as B,o as I,y as r,z as n,A as s,f as g,S as b,F as m,ae as h,N as T,d as E,ad as F,ah as R,U as A,V as U,I as q,a6 as D}from"./index-C_WQiL5x.js";import{h as O}from"./workbench-DvqQznPU.js";import{S as P}from"./index-CP9mRTef.js";import"./index-CFH9amCW.js";import"./index-DV9eZzCp.js";import"./use-id-CROUrReO.js";import"./index-X5SftILh.js";const j=f=>(A("data-v-d7d20c3d"),f=f(),U(),f),G={class:"focus-contacts-page min-h-screen pb-24 bg-[#f0f2f5]"},J={class:"sticky top-0 z-40 bg-[#f0f2f5]/95 backdrop-blur-md transition-colors duration-200"},K={class:"px-5 pt-3 pb-2"},Q={class:"flex items-center justify-between mb-4 relative"},W=j(()=>s("h1",{class:"text-lg font-bold tracking-tight text-[#1f1f1f] absolute left-1/2 -translate-x-1/2"},"全部关注",-1)),X=j(()=>s("button",{class:"flex items-center justify-center w-8 h-8 rounded-full active:bg-gray-200 text-[#1976d2] font-medium text-sm transition-colors"}," 管理 ",-1)),Y={class:"flex gap-2 overflow-x-auto hide-scrollbar pb-1 -mx-5 px-5"},Z=["onClick"],ee={class:"px-5 py-2 space-y-3"},te={key:0,class:"flex justify-center py-10"},se={key:1,class:"text-center py-16 text-gray-400 text-sm"},oe=["onClick"],re={class:"flex items-center gap-3 overflow-hidden w-full"},ne={class:"flex-shrink-0"},ae=["innerHTML"],le={class:"flex flex-col min-w-0 flex-1 gap-1"},ie={class:"flex items-center gap-2"},ce=["innerHTML"],de={key:0,class:"flex flex-wrap gap-2 items-center"},ue=["innerHTML"],fe=E({name:"FocusContacts"}),ge=Object.assign(fe,{setup(f){const x=z(),p=u(!1),i=u(""),_=u([]),v=u([]),c=u("全部"),V={c1:"bg-[#1976d2] text-white border border-[#bbdefb]",c2:"bg-[#1976d2] text-white border border-[#bbdefb]",c3:"bg-[#1976d2] text-white border border-[#bbdefb]",c4:"bg-[#1976d2] text-white border border-[#bbdefb]"},y=B(()=>{let t=v.value;if(c.value!=="全部"&&(t=t.filter(o=>o.entity===c.value)),i.value.trim()){const o=i.value.trim().toLowerCase();t=t.filter(a=>{var l,e;return a.fullName.toLowerCase().includes(o)||((l=a.abbr)==null?void 0:l.replace(/\\n/g,"").toLowerCase().includes(o))||((e=a.tags)==null?void 0:e.some(d=>d.toLowerCase().includes(o)))})}return t}),w=t=>{c.value=t},k=t=>{const o=(t||"").toString(),a=i.value.trim();if(!a)return o;const l=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),e=new RegExp(`(${l})`,"gi");return o.replace(e,'<span class="hl">$1</span>')},$=t=>{x.push({name:"CustomerProfile",query:{name:t.name}})},H=()=>{x.back()};return I(async()=>{p.value=!0;try{const t=await O();_.value=t.entities||[],v.value=t.customers||[]}catch(t){console.warn("获取全部关注客户失败",t)}finally{p.value=!1}}),(t,o)=>{const a=q,l=D;return r(),n("div",G,[s("header",J,[s("div",K,[s("div",Q,[s("button",{class:"flex items-center justify-center w-8 h-8 -ml-2 rounded-full active:bg-gray-200 text-gray-600 transition-colors",onClick:H},[g(a,{name:"arrow-left",size:"20"})]),W,X]),g(P,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=e=>i.value=e),placeholder:"搜索客户名称、标签","show-back":!1,class:"focus-search"},null,8,["modelValue"]),s("div",Y,[s("button",{class:b(["flex-shrink-0 px-4 py-1.5 rounded-full text-xs font-medium border transition-colors",c.value==="全部"?"bg-[#1976d2] text-white shadow-sm border-[#1976d2]":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50 active:bg-gray-100"]),onClick:o[1]||(o[1]=e=>w("全部"))}," 全部 ",2),(r(!0),n(m,null,h(_.value,e=>(r(),n("button",{key:e,class:b(["flex-shrink-0 px-4 py-1.5 rounded-full text-xs font-medium border transition-colors",c.value===e?"bg-[#1976d2] text-white shadow-sm border-[#1976d2]":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50 active:bg-gray-100"]),onClick:d=>w(e)},F(e),11,Z))),128))])])]),s("main",ee,[p.value?(r(),n("div",te,[g(l,{type:"spinner",color:"#1976d2"})])):y.value.length===0?(r(),n("div",se," 暂无关注客户 ")):T("",!0),(r(!0),n(m,null,h(y.value,e=>{var d,C,L;return r(),n("div",{key:e.id,class:"bg-white p-4 rounded-xl shadow-sm flex items-center justify-between relative overflow-hidden active:bg-gray-50 transition-colors",onClick:M=>$(e)},[s("div",re,[s("div",ne,[s("div",{class:b(["w-12 h-12 rounded-md flex items-center justify-center shadow-sm text-sm font-semibold break-words whitespace-normal text-center leading-[1.1] px-0.5 pointer-events-none",V[e.colorClass]||"bg-[#1976d2] text-white border border-[#bbdefb]"])},[s("span",{innerHTML:((d=e.abbr)==null?void 0:d.replace(/\\n/g,"<br>"))||((C=e.name)==null?void 0:C.slice(0,4))},null,8,ae)],2)]),s("div",le,[s("div",ie,[s("h3",{class:"font-normal text-gray-900 truncate text-base leading-tight",innerHTML:k(e.fullName)},null,8,ce)]),(L=e.tags)!=null&&L.length?(r(),n("div",de,[(r(!0),n(m,null,h(e.tags,(M,S)=>(r(),n("span",{key:S,class:b(["inline-flex items-center rounded-md px-1.5 py-0.5 text-[10px] font-medium whitespace-nowrap",S===0?"bg-gray-50 text-gray-500 ring-1 ring-inset ring-gray-500/10":"bg-orange-50 text-gray-500 ring-1 ring-inset ring-orange-200"]),innerHTML:k(M)},null,10,ue))),128))])):T("",!0)])]),s("button",{class:"flex-shrink-0 p-2 -mr-2 ml-1 text-[#1976d2] hover:bg-blue-50 rounded-full transition-colors self-center",onClick:o[2]||(o[2]=R(()=>{},["stop"]))},[g(a,{name:"star",size:"20",color:"#1976d2"})])],8,oe)}),128))])])}}}),ye=N(ge,[["__scopeId","data-v-d7d20c3d"]]);export{ye as default};
