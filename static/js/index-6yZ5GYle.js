import{q as V,o as t,c as a,a as l,t as o,w as F,F as g,e as p,n as y,f as X,u as Y,a1 as ee,r as h,H as le,l as O,Z as $,b as v,g as te}from"./index-D20zfMTO.js";import{_ as ae,a as se}from"./index-DBiZD2fZ.js";import{_ as oe}from"./index-iPh4gDYS.js";const re={class:"flex justify-between items-start mb-1"},ne=["innerHTML"],ie={class:"flex gap-1.5 flex-wrap mt-1"},ue={class:"text-gray-600 text-[13px]"},ce=l("span",{class:"text-gray-400 text-[13px]"},"·",-1),de={class:"text-gray-500 text-[13px]"},be=l("svg",{class:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[l("path",{d:"M3 3a1 1 0 011-1h12a1 1 0 011 1v3a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V3z"})],-1),ve=[be],ge={class:"flex items-center gap-3 text-sm mt-3"},pe={class:"flex-1 flex items-center"},he={class:"flex gap-2 flex-wrap"},ye=l("div",{class:"w-px h-12 bg-gray-200"},null,-1),me={class:"flex items-center gap-3"},xe={class:"relative w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center text-white text-sm font-bold flex-shrink-0"},fe={class:"flex flex-col gap-1"},_e={class:"text-[11px] text-gray-500"},ke={class:"text-[15px] font-semibold text-gray-900"},we={__name:"index",props:{company:{type:Object,required:!0},searchKeyword:{type:String,default:""}},emits:["click","monitor","call"],setup(m){const b=m,C=V(()=>{if(!b.searchKeyword)return b.company.name;const r=new RegExp(`(${b.searchKeyword})`,"gi");return b.company.name.replace(r,'<span style="color: #ff5722">$1</span>')}),c=V(()=>{const r=b.company.products||[];if(r.length<=2)return r.map(u=>({name:u,isMore:!1}));const d=r.slice(0,2).map(u=>({name:u,isMore:!1}));return d.push({name:`+${r.length-2}`,isMore:!0}),d});return(r,d)=>(t(),a("div",{class:"bg-white border border-gray-200 rounded-lg p-3 mb-3 shadow-sm cursor-pointer transition-all hover:shadow-md hover:-translate-y-0.5",onClick:d[2]||(d[2]=u=>r.$emit("click"))},[l("div",re,[l("div",null,[l("div",{class:"text-lg font-bold text-gray-900",innerHTML:C.value},null,8,ne),l("div",ie,[l("span",ue,o(m.company.industry),1),ce,l("span",de,o(m.company.entity),1)])]),l("button",{class:"w-7 h-7 flex items-center justify-center rounded hover:bg-gray-100 transition-colors flex-shrink-0",onClick:d[0]||(d[0]=F(u=>r.$emit("monitor"),["stop"])),title:"查看详情"},ve)]),l("div",ge,[l("div",pe,[l("div",he,[(t(!0),a(g,null,p(c.value,(u,j)=>(t(),a("span",{key:j,class:y(["px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs border border-gray-200",{"bg-blue-50 text-blue-700 border-blue-200 font-semibold":u.isMore}])},o(u.name),3))),128))])]),ye,l("div",me,[l("div",xe,[X(o(m.company.manager.avatar)+" ",1),l("div",{class:"absolute -right-2 -bottom-1 w-4 h-4 bg-white rounded-full border border-white cursor-pointer hover:scale-110 transition-transform",style:{"background-image":"url('assets/telphone.png')","background-size":"contain","background-repeat":"no-repeat","background-position":"center"},onClick:d[1]||(d[1]=F(u=>r.$emit("call",m.company.manager.phone),["stop"]))})]),l("div",fe,[l("span",_e,o(m.company.manager.org),1),l("span",ke,o(m.company.manager.name),1)])])])]))}},Ce={class:"min-h-screen bg-gray-100"},$e={class:"grid grid-cols-2 gap-2.5"},je=["onClick"],Se={key:0,class:"text-lg font-bold"},Me={class:"grid grid-cols-4 gap-2.5"},Oe=["onClick"],Ve={key:0,class:"absolute top-1 right-1 text-sm font-bold"},Le={class:"flex gap-0 border-l-2 border-gray-200 pl-0"},Te={class:"flex-[0_0_100px] bg-gray-100 border-r border-gray-200"},Fe=["onClick"],Ae={class:"flex-1 bg-white max-h-[300px] overflow-y-auto"},Be={key:0,class:"p-4"},Pe=["onClick"],qe={key:0,class:"text-lg font-bold"},Ie={key:1,class:"p-4"},Ne=["onClick"],ze={key:0,class:"text-lg font-bold"},De={class:"flex gap-0 border-l-2 border-gray-200 pl-0"},Ee={class:"flex-[0_0_100px] bg-gray-100 border-r border-gray-200"},Ke=["onClick"],He={class:"flex-1 bg-white max-h-[300px] overflow-y-auto"},Re={key:0,class:"p-4"},Ue=["onClick"],Ge={key:0,class:"text-lg font-bold"},Je={key:1,class:"p-4"},Ze=["onClick"],Qe={key:0,class:"text-lg font-bold"},We={class:"px-4 py-3 bg-white"},Xe=l("div",{class:"flex items-center justify-center py-5 text-gray-500 text-[13px] gap-2.5"},[l("span",{class:"w-8 h-px bg-gray-200"}),l("span",null,"已加载全部"),l("span",{class:"w-8 h-px bg-gray-200"})],-1),Ye=l("div",{class:"h-20"},null,-1),al={__name:"index",setup(m){const b=Y(),C=ee(),c=h("");le(()=>{C.query.keyword&&(c.value=C.query.keyword)});const r=h("customer"),d=[{label:"查客户",value:"customer"},{label:"查产品",value:"product"}],u=h(!1),j=[{key:"business",label:"营业主体"},{key:"industry",label:"行业"}],A=[{key:"org1",label:"上级组织+1"},{key:"org2",label:"上级组织+2"}],B=[{label:"上海分公司",value:"shanghai"},{label:"苏州事务所",value:"suzhou"},{label:"日本",value:"japan"},{label:"东南亚",value:"sea"}],S=h([]),P=[{label:"卫浴",value:"sanitary"},{label:"装配",value:"assembly"},{label:"制造业",value:"manufacturing"},{label:"电子",value:"electronics"},{label:"汽车",value:"automotive"},{label:"机械",value:"machinery"},{label:"化工",value:"chemical"},{label:"纺织",value:"textile"},{label:"食品",value:"food"},{label:"医药",value:"pharma"},{label:"建筑",value:"construction"},{label:"物流",value:"logistics"}],M=h([]),f=h("japan"),q=[{label:"对日",value:"japan"},{label:"国内",value:"domestic"}],I=[{label:"工场SystemGr",value:"jp1-1"},{label:"Smart制造推进部",value:"jp1-2"},{label:"技术部门",value:"jp1-3"}],N=[{label:"集团总部",value:"cn1-1"},{label:"华东公司",value:"cn1-2"},{label:"华南公司",value:"cn1-3"}],_=h([]),k=h("japan"),z=[{label:"对日",value:"japan"},{label:"国内",value:"domestic"}],D=[{label:"工场SystemGr",value:"jp2-1"},{label:"ものを作りSol",value:"jp2-2"},{label:"生产管理部",value:"jp2-3"}],E=[{label:"集团总部",value:"cn2-1"},{label:"制造中心",value:"cn2-2"},{label:"研发中心",value:"cn2-3"}],w=h([]),L=[{id:1,name:"天津雅马哈电子乐器有限公司",industry:"电子制造 · 乐器设备",entity:"上海分公司",products:["A1-iPM","数采","FlexPlan"],manager:{avatar:"张",org:"行政数字化 | SI1",name:"张明",phone:"13800138000"}},{id:2,name:"雅马哈发动机（中国）有限公司",industry:"制造业 · 汽车零部件",entity:"苏州事务所",products:["FlexPlan","A1-Stage"],manager:{avatar:"李",org:"技术服务部 | SI2",name:"李华",phone:"13900139000"}},{id:3,name:"雅马哈发动机（厦门）信息系统有限公司",industry:"卫浴 · 智能家居",entity:"日本",products:["A1-iPM","数采","A1-MES"],manager:{avatar:"王",org:"智能制造 | SI3",name:"王芳",phone:"13700137000"}},{id:4,name:"雅马哈乐器音响（中国）投资有限公司",industry:"音乐产业·乐器销售",entity:"北京分公司",products:["FlexPlan","A1-MES","A1-Stage","数采"],manager:{avatar:"赵",org:"行政数字化 | SI1",name:"赵敏",phone:"13600136000"}}],K=V(()=>{if(!c.value.trim())return L;const s=c.value.trim().toLowerCase();return L.filter(n=>n.name.toLowerCase().includes(s)||n.industry.toLowerCase().includes(s)||n.manager.name.toLowerCase().includes(s))}),x=(s,n)=>{const i={business:S,industry:M,org1:_,org2:w}[s],T=i.value.indexOf(n);T>-1?i.value.splice(T,1):i.value.push(n)},H=()=>{b.back()},R=()=>{console.log("搜索:",c.value)},U=()=>{c.value=""},G=s=>{s==="product"&&b.push({name:"ProductList"})},J=s=>{console.log("筛选条件变更:",s)},Z=s=>{b.push({name:"CustomerProfile",query:{id:s.id}})},Q=s=>{console.log("监控客户:",s.name),c.value=s.name,b.push({name:"CustomerDetail",query:{id:s.id,keyword:s.name}})},W=s=>{console.log("拨打电话:",s)};return(s,n)=>(t(),a("div",Ce,[O(ae,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=e=>c.value=e),placeholder:"雅马哈",onBack:H,onSearch:R,onClear:U},null,8,["modelValue"]),O(oe,{modelValue:r.value,"onUpdate:modelValue":[n[1]||(n[1]=e=>r.value=e),G],tabs:d},null,8,["modelValue"]),O(se,{groupSwitch:u.value,"onUpdate:groupSwitch":n[2]||(n[2]=e=>u.value=e),"main-filters":j,"more-filters":A,onFilterChange:J},{business:$(()=>[l("div",$e,[(t(),a(g,null,p(B,e=>l("div",{key:e.value,class:y(["flex items-center justify-between px-4 py-2 bg-white border border-gray-200 rounded-lg cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 hover:-translate-y-px hover:shadow-sm",{"bg-blue-50 border-blue-600 text-blue-600 font-medium":S.value.includes(e.value)}]),onClick:i=>x("business",e.value)},[l("span",null,o(e.label),1),S.value.includes(e.value)?(t(),a("span",Se,"✓")):v("",!0)],10,je)),64))])]),industry:$(()=>[l("div",Me,[(t(),a(g,null,p(P,e=>l("div",{key:e.value,class:y(["relative flex flex-col items-center justify-center px-2 py-1.5 bg-white border border-gray-200 rounded-lg cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 hover:-translate-y-px hover:shadow-sm text-center gap-1 text-sm",{"bg-blue-50 border-blue-600 text-blue-600 font-medium":M.value.includes(e.value)}]),onClick:i=>x("industry",e.value)},[l("span",null,o(e.label),1),M.value.includes(e.value)?(t(),a("span",Ve," ✓ ")):v("",!0)],10,Oe)),64))])]),org1:$(()=>[l("div",Le,[l("div",Te,[(t(),a(g,null,p(q,e=>l("div",{key:e.value,class:y(["px-3 py-4 text-sm text-gray-600 cursor-pointer border-b border-gray-200 transition-all text-center relative",{"bg-white text-blue-600 font-semibold border-r-3 border-r-blue-600":f.value===e.value,"hover:bg-gray-50 hover:text-blue-600":f.value!==e.value}]),onClick:i=>f.value=e.value},o(e.label),11,Fe)),64))]),l("div",Ae,[f.value==="japan"?(t(),a("div",Be,[(t(),a(g,null,p(I,e=>l("div",{key:e.value,class:y(["flex items-center justify-between px-4 py-3.5 mb-2.5 last:mb-0 bg-white border border-gray-200 rounded-lg cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 hover:translate-x-0.5 hover:shadow-sm text-[15px]",{"bg-blue-50 border-blue-600 text-blue-600 font-medium":_.value.includes(e.value)}]),onClick:i=>x("org1",e.value)},[l("span",null,o(e.label),1),_.value.includes(e.value)?(t(),a("span",qe,"✓")):v("",!0)],10,Pe)),64))])):v("",!0),f.value==="domestic"?(t(),a("div",Ie,[(t(),a(g,null,p(N,e=>l("div",{key:e.value,class:y(["flex items-center justify-between px-4 py-3.5 mb-2.5 last:mb-0 bg-white border border-gray-200 rounded-lg cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 hover:translate-x-0.5 hover:shadow-sm text-[15px]",{"bg-blue-50 border-blue-600 text-blue-600 font-medium":_.value.includes(e.value)}]),onClick:i=>x("org1",e.value)},[l("span",null,o(e.label),1),_.value.includes(e.value)?(t(),a("span",ze,"✓")):v("",!0)],10,Ne)),64))])):v("",!0)])])]),org2:$(()=>[l("div",De,[l("div",Ee,[(t(),a(g,null,p(z,e=>l("div",{key:e.value,class:y(["px-3 py-4 text-sm text-gray-600 cursor-pointer border-b border-gray-200 transition-all text-center relative",{"bg-white text-blue-600 font-semibold border-r-3 border-r-blue-600":k.value===e.value,"hover:bg-gray-50 hover:text-blue-600":k.value!==e.value}]),onClick:i=>k.value=e.value},o(e.label),11,Ke)),64))]),l("div",He,[k.value==="japan"?(t(),a("div",Re,[(t(),a(g,null,p(D,e=>l("div",{key:e.value,class:y(["flex items-center justify-between px-4 py-3.5 mb-2.5 last:mb-0 bg-white border border-gray-200 rounded-lg cursor-pointer transition-all hover:bg-gray-50 hover:border-gray-300 hover:translate-x-0.5 hover:shadow-sm text-[15px]",{"bg-blue-50 border-blue-600 text-blue-600 font-medium":w.value.includes(e.value)}]),onClick:i=>x("org2",e.value)},[l("span",null,o(e.label),1),w.value.includes(e.value)?(t(),a("span",Ge,"✓")):v("",!0)],10,Ue)),64))])):v("",!0),k.value==="domestic"?(t(),a("div",Je,[(t(),a(g,null,p(E,e=>l("div",{key:e.value,class:y(["flex items-center justify-between px-4 py-3.5 mb-2.5 last:mb-0 bg-white border border-gray-200 rounded-lg cursor-pointer transition-all hover:translate-x-0.5 hover:shadow-sm text-[15px]",{"bg-blue-50 border-blue-600 text-blue-600 font-medium":w.value.includes(e.value)}]),onClick:i=>x("org2",e.value)},[l("span",null,o(e.label),1),w.value.includes(e.value)?(t(),a("span",Qe,"✓")):v("",!0)],10,Ze)),64))])):v("",!0)])])]),_:1},8,["groupSwitch"]),l("div",We,[(t(!0),a(g,null,p(K.value,e=>(t(),te(we,{key:e.id,company:e,"search-keyword":c.value,onClick:i=>Z(e),onMonitor:i=>Q(e),onCall:W},null,8,["company","search-keyword","onClick","onMonitor"]))),128))]),Xe,Ye]))}};export{al as default};
