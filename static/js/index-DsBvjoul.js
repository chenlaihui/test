import{y as s,z as n,A as t,ad as u,af as S,_ as B,x as C,F as w,ae as $,S as I,U as T,V as K,ah as U,N as A,a2 as M,ag as H,K as J,R as Q,r as b,o as W,f as _,G as X,d as Y,E as R}from"./index-C_WQiL5x.js";import{E as Z}from"./index-DhnzfwLA.js";import{g as ee}from"./product-DY24qUAk.js";import{g as te}from"./customer-Cl2wR_Zs.js";import{_ as ae}from"./index-DFfJ5MZ9.js";import"./use-id-CROUrReO.js";import"./index-BEOc3wvK.js";import"./index-CFH9amCW.js";const se={class:"flex items-center gap-4"},le={class:"w-20 h-20 rounded-full bg-white/25 flex items-center justify-center text-white text-[28px] font-bold flex-shrink-0 border-[3px] border-white/50 overflow-hidden"},oe=["src","alt"],re={key:1},ne={class:"flex-1 flex flex-col gap-1.5"},ie={class:"text-sm text-white/90 font-medium"},de={class:"text-[28px] font-bold text-white mb-1.5 flex items-center gap-2"},ue={class:"flex items-center gap-2 text-sm text-white/90"},ce=t("span",null,"Â·",-1),me={__name:"index",props:{manager:{type:Object,required:!0},backgroundImage:{type:String,default:"url('https://images.unsplash.com/photo-1558981403-c5f9899a28bc?w=800&h=400&fit=crop') center/cover"}},emits:["call"],setup(e){const d=c=>{c.target.style.display="none"};return(c,a)=>{var o;return s(),n("div",{class:"bg-gradient-to-br from-purple-500/95 to-purple-700/95 mx-4 my-3 rounded-2xl p-4 shadow-lg shadow-purple-500/30 text-white",style:S({backgroundImage:e.backgroundImage})},[t("div",se,[t("div",le,[e.manager.avatar?(s(),n("img",{key:0,src:e.manager.avatar,alt:e.manager.name,class:"w-full h-full object-cover",onError:d},null,40,oe)):(s(),n("span",re,u((o=e.manager.name)==null?void 0:o.charAt(0)),1))]),t("div",ne,[t("div",ie,u(e.manager.label),1),t("div",de,[t("span",null,u(e.manager.name),1),t("span",{class:"text-xl cursor-pointer transition-transform hover:scale-110",onClick:a[0]||(a[0]=i=>c.$emit("call",e.manager.phone,e.manager.name))}," ðŸ“ž ")]),t("div",ue,[t("span",null,u(e.manager.position),1),ce,t("span",null,u(e.manager.department),1)])])])],4)}}},O=e=>(T("data-v-f61a7969"),e=e(),K(),e),ve={class:"relative bg-white border-b border-gray-200"},pe={ref:"scrollerRef",class:"flex gap-3 px-4 py-3 overflow-x-auto scroll-smooth",style:{"scrollbar-width":"none","-ms-overflow-style":"none"}},xe=["onClick"],fe={class:"text-[13px] text-gray-900 font-medium text-center whitespace-nowrap"},ge=O(()=>t("span",{class:"text-sm text-gray-600"},"å±•å¼€",-1)),he=O(()=>t("span",{class:"text-xs text-gray-600"},"â–¼",-1)),be=[ge,he],ye={__name:"index",props:{products:{type:Array,required:!0},modelValue:{type:String,default:""},filterSeries:{type:String,default:"all"}},emits:["update:modelValue","expand"],setup(e){const d=e,c=C(()=>d.filterSeries==="all"?d.products:d.products.filter(a=>a.series===d.filterSeries));return(a,o)=>(s(),n("div",ve,[t("div",pe,[(s(!0),n(w,null,$(c.value,i=>(s(),n("div",{key:i.id,class:I(["flex flex-col items-center gap-2 px-4 py-2.5 bg-gray-50 rounded-xl cursor-pointer transition-all flex-shrink-0 border-2",{"bg-blue-50 border-blue-600":e.modelValue===i.id,"border-transparent hover:bg-gray-100 hover:-translate-y-0.5 hover:shadow-md":e.modelValue!==i.id}]),onClick:v=>a.$emit("update:modelValue",i.id)},[t("div",{class:"w-11 h-11 rounded-[10px] flex items-center justify-center text-white text-lg font-bold",style:S({background:i.gradient})},u(i.logo),5),t("div",fe,u(i.name),1)],10,xe))),128))],512),t("div",{class:"absolute right-0 top-0 bottom-0 flex items-center gap-1 px-4 py-3 cursor-pointer transition-all",style:{background:"linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.9) 30%, rgba(255, 255, 255, 1))"},onClick:o[0]||(o[0]=i=>a.$emit("expand"))},be)]))}},_e=B(ye,[["__scopeId","data-v-f61a7969"]]),we={class:"text-sm font-semibold text-gray-600 mb-3 pl-1"},$e={class:"grid grid-cols-3 gap-3"},ke=["onClick"],Ve={class:"text-[13px] text-gray-900 font-medium text-center"},Ce={__name:"index",props:{modelValue:{type:Boolean,default:!1},products:{type:Array,required:!0},selectedProduct:{type:String,default:""}},emits:["update:modelValue","select"],setup(e,{emit:d}){const c=e,a=d,o=C(()=>{const v={};return c.products.forEach(r=>{v[r.series]||(v[r.series]=[]),v[r.series].push(r)}),Object.keys(v).map(r=>({name:r,products:v[r]}))}),i=v=>{a("select",v),a("update:modelValue",!1)};return(v,r)=>e.modelValue?(s(),n("div",{key:0,class:"fixed inset-0 bg-black/30 z-50 flex items-start justify-center overflow-y-auto py-5",onClick:r[1]||(r[1]=g=>v.$emit("update:modelValue",!1))},[t("div",{class:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative mx-4 shadow-2xl animate-[slideDown_0.3s_ease-out]",style:{top:"150px"},onClick:r[0]||(r[0]=U(()=>{},["stop"]))},[(s(!0),n(w,null,$(o.value,g=>(s(),n("div",{key:g.name,class:"px-5 py-4 border-b border-gray-200 last:border-0"},[t("div",we,u(g.name),1),t("div",$e,[(s(!0),n(w,null,$(g.products,f=>(s(),n("div",{key:f.id,class:I(["flex flex-col items-center gap-1.5 px-2 py-3 bg-gray-50 rounded-[10px] cursor-pointer transition-all border-2 relative",{"bg-blue-50 border-blue-600":e.selectedProduct===f.id,"border-transparent hover:bg-gray-100 hover:scale-105 hover:shadow-md":e.selectedProduct!==f.id}]),onClick:k=>i(f.id)},[t("div",{class:"w-12 h-12 rounded-[10px] flex items-center justify-center text-white text-xl font-bold",style:S({background:f.gradient})},u(f.logo),5),t("div",Ve,u(f.name),1)],10,ke))),128))])]))),128))])])):A("",!0)}},Se={class:"flex min-h-[400px] bg-white mx-4 rounded-xl overflow-hidden shadow-sm"},Pe={class:"w-20 bg-gray-50 border-r border-gray-200 py-2 flex flex-col gap-1"},je=["onClick"],Ie={key:0,class:"absolute left-0 top-1/2 -translate-y-1/2 w-0.5 h-6 bg-blue-600 rounded-r"},Ae={class:"flex-1 px-4 py-3 overflow-y-auto"},Ee={__name:"index",props:{categories:{type:Array,required:!0},modelValue:{type:String,default:"all"}},emits:["update:modelValue"],setup(e){return(d,c)=>(s(),n("div",Se,[t("div",Pe,[(s(!0),n(w,null,$(e.categories,a=>(s(),n("div",{key:a.value,class:I(["px-2 py-3 text-center text-sm text-gray-600 cursor-pointer transition-all relative",{"bg-white text-blue-600 font-semibold":e.modelValue===a.value,"hover:bg-gray-100 hover:text-gray-900":e.modelValue!==a.value}]),onClick:o=>d.$emit("update:modelValue",a.value)},[M(u(a.label)+" ",1),e.modelValue===a.value?(s(),n("div",Ie)):A("",!0)],10,je))),128))]),t("div",Ae,[H(d.$slots,"default")])]))}},Ne={class:"bg-white rounded-xl p-4 mb-3 flex items-center gap-4 shadow-md hover:shadow-xl hover:translate-x-1 transition-all cursor-pointer"},qe={class:"flex-1 flex flex-col gap-1.5"},ze={class:"text-[17px] font-semibold text-gray-900"},Re={class:"text-sm font-normal text-gray-600 ml-2"},Be={class:"text-sm text-gray-600"},Ue={__name:"index",props:{user:{type:Object,required:!0}},emits:["call"],setup(e,{emit:d}){const c=e,a=d,o=()=>{a("call",c.user.phone,c.user.name)};return(i,v)=>(s(),n("div",Ne,[t("div",{class:"w-14 h-14 rounded-full flex items-center justify-center text-white text-xl font-bold flex-shrink-0",style:S({background:e.user.gradient||"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"})},u(e.user.avatar),5),t("div",qe,[t("div",ze,[M(u(e.user.name)+" ",1),t("span",Re,u(e.user.department||e.user.dept),1)]),t("div",Be,u(e.user.role),1)]),t("div",{class:"w-11 h-11 rounded-full flex items-center justify-center text-2xl cursor-pointer hover:bg-gray-100 hover:scale-110 hover:shadow-md transition-all flex-shrink-0",onClick:U(o,["stop"])}," ðŸ“ž ")]))}},Me={class:"customer-product-page"},Oe={class:"bg-white px-4 pt-3 pb-2"},De={class:"text-lg font-bold"},Le={class:"px-3 mt-2"},Fe={class:"mt-3"},Ge={class:"mt-3"},Te={class:"px-2 pb-4"},Ke=Y({name:"CustomerProduct"}),He=Object.assign(Ke,{setup(e){const d=J();Q();const c=b({}),a=b([]),o=b(""),i=b(!1),v=[{label:"å…¨éƒ¨",value:"all"},{label:"æœåŠ¡æ–¹",value:"service"},{label:"æˆ‘æ–¹",value:"ours"}],r=b("all"),g=b({}),f=b(!1),k=b({name:"",phone:"",email:""}),E=C(()=>{const m=o.value;if(!m)return[];if(r.value==="all"){const l=g.value[`${m}-service`]||[],y=g.value[`${m}-ours`]||[];return[...l,...y]}return g.value[`${m}-${r.value}`]||[]}),N=C(()=>d.query.name||d.params.name||""),D=async()=>{var m;try{const l=N.value,[y,p]=await Promise.allSettled([te({keyword:l,pageSize:1}),ee({keyword:l})]);if(y.status==="fulfilled"){const x=((m=y.value)==null?void 0:m.list)||y.value||[],h=Array.isArray(x)?x[0]||{}:x;c.value=h.manager||{name:h.managerName,phone:h.managerPhone,avatar:h.managerAvatar,label:"å®¢æˆ·ç»ç†",position:"å®¢æˆ·ç»ç†",department:h.entity}}if(p.status==="fulfilled"){const x=p.value,h=(x==null?void 0:x.list)||x||[];a.value=Array.isArray(h)?h:[],a.value.length&&(o.value=a.value[0].id||a.value[0].code);const G=(x==null?void 0:x.contacts)||{},P={};for(const z of a.value){const j=z.id||z.code,V=G[j]||{};P[`${j}-service`]=V.client||V.service||[],P[`${j}-ours`]=V.internal||V.ours||[]}g.value=P}}catch(l){console.error("åŠ è½½å®¢æˆ·äº§å“æ•°æ®å¤±è´¥:",l)}},q=(m,l)=>{k.value={name:l||"",phone:m||"",email:""},f.value=!0},L=m=>{o.value=m,i.value=!1},F=m=>{o.value=m,r.value="all"};return W(()=>{D()}),(m,l)=>{const y=Z;return s(),n("div",Me,[t("div",Oe,[t("div",De," è¿‡å¹´å¥½ï¼Œ"+u(N.value)+"~ ",1)]),t("div",Le,[_(me,{manager:c.value,onCall:q},null,8,["manager"])]),t("div",Fe,[_(_e,{products:a.value,modelValue:o.value,"onUpdate:modelValue":[l[0]||(l[0]=p=>o.value=p),F],onExpand:l[1]||(l[1]=p=>i.value=!0)},null,8,["products","modelValue"])]),t("div",Ge,[_(Ee,{categories:v,modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=p=>r.value=p)},{default:X(()=>[t("div",Te,[(s(!0),n(w,null,$(E.value,(p,x)=>(s(),R(Ue,{key:x,user:p,onCall:q,class:"mb-2"},null,8,["user"]))),128)),E.value.length?A("",!0):(s(),R(y,{key:0,description:"æš‚æ— è”ç³»äºº","image-size":60}))])]),_:1},8,["modelValue"])]),_(Ce,{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=p=>i.value=p),products:a.value,"selected-product":o.value,onSelect:L},null,8,["modelValue","products","selected-product"]),_(ae,{modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=p=>f.value=p),name:k.value.name,phone:k.value.phone},null,8,["modelValue","name","phone"])])}}}),at=B(He,[["__scopeId","data-v-42a310b4"]]);export{at as default};
